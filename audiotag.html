<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>jsGoniometer by DrSnuggles</title>
  <script src="goniometer.js"></script>
  <style>
    #vectorcanvas {
      position: absolute;
      top: 10vh;
      left: 0;
      width: 100vw;
      height: 90vh;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <audio controls id="audiotag">
    <source src="audio/WulleWulle.mp3"/>
  </audio>
  <button onclick="letsGo()">Start</button>
  <canvas id="vectorcanvas"></canvas>

  <script>
    function letsGo(){
      var AudioContext = window.AudioContext || window.webkitAudioContext;
      var audioCtx = new AudioContext();
      var source = audioCtx.createMediaElementSource(audiotag); // create source from audio tag
      source.connect(audioCtx.destination); // route source to destination
      audiotag.play(); // play audio
      // set colors (all rgba)
      Goniometer.bgColor = [20, 40, 20, 0.05]; // rgba values !! use opacity to imitate CRT !!
      Goniometer.bgLines = [0, 60, 0, 0.5]; // rgba values
      Goniometer.scopeColor = [150, 255, 150, 1]; // rgba values
      Goniometer.start(source, vectorcanvas); // start the goniometer
    };
  </script>

</body>
</html>
